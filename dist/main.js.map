{"version":3,"file":"main.js","mappings":"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","sources":["webpack://geolocation_notification_media/./src/js/isValidCoordinates.js","webpack://geolocation_notification_media/./src/js/formatTime.js","webpack://geolocation_notification_media/./src/components/WidgetChat.js","webpack://geolocation_notification_media/./src/js/app.js","webpack://geolocation_notification_media/./src/index.js"],"sourcesContent":["export function isValidCoordinates(input) {\n  const regex = /^(\\[)?(-?\\d+(\\.\\d+)?),\\s*(-?\\d+(\\.\\d+)?)(\\])?$/;\n  const match = input.match(regex);\n  if (!match) {\n    return { error: \"Некорректный формат координат\" };\n  }\n  const latitude = parseFloat(match[2]);\n  const longitude = parseFloat(match[4]);\n  return { latitude, longitude };\n}\n","export function formatTime(time) {\n  const minutes = Math.floor(time / 60);\n  const seconds = time % 60;\n  return `${minutes.toString().padStart(2, \"0\")}:${seconds\n    .toString()\n    .padStart(2, \"0\")}`;\n}\n","import { isValidCoordinates } from \"../js/isValidCoordinates\";\nimport { formatTime } from \"../js/formatTime\";\n\nexport default class WidgetChat {\n  constructor(messagesBox, messageInput) {\n    this.messagesBox = messagesBox;\n    this.messageInput = messageInput;\n    this.messages = [];\n    this.blob = null;\n    this.recordAudioBtn = null;\n    this.recordVideoBtn = null;\n    this.recordSend = null;\n    this.recordCancel = null;\n    this.videoWindow = null;\n    this.timer = null;\n\n    this.onEventInput = this.onEventInput.bind(this);\n    this.init = this.init.bind(this);\n    this.showModal = this.showModal.bind(this);\n    this.addMessage = this.addMessage.bind(this);\n    this.createMessage = this.createMessage.bind(this);\n    this.renderMessage = this.renderMessage.bind(this);\n    this.toGeolocate = this.toGeolocate.bind(this);\n    this.toRecordVideo = this.toRecordVideo.bind(this);\n    this.toRecordAudio = this.toRecordAudio.bind(this);\n    this.init();\n    this.onEventInput();\n  }\n\n  init() {\n    const inputBox = this.messageInput.closest(\".message-input-box\");\n    this.recordAudioBtn = inputBox.querySelector(\".record-audio\");\n    this.recordVideoBtn = inputBox.querySelector(\".record-video\");\n    this.recordSend = inputBox.querySelector(\".record-send\");\n    this.recordCancel = inputBox.querySelector(\".record-cancel\");\n    this.videoWindow = this.messagesBox.querySelector(\".video-window\");\n    this.timer = inputBox.querySelector(\".timer\");\n  }\n\n  onEventInput() {\n    this.messageInput.addEventListener(\"keyup\", (event) => {\n      event.preventDefault();\n      if (event.code !== \"Enter\") return;\n      if (!this.messageInput.value) return;\n      this.toGeolocate(\"text\");\n    });\n    this.recordVideoBtn.addEventListener(\"click\", this.toRecordVideo);\n    this.recordAudioBtn.addEventListener(\"click\", this.toRecordAudio);\n  }\n\n  async toRecordAudio() {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: true,\n      });\n\n      this.recordAudioBtn.classList.add(\"hide\");\n      this.recordVideoBtn.classList.add(\"hide\");\n      this.recordSend.classList.remove(\"hide\");\n      this.recordCancel.classList.remove(\"hide\");\n      this.timer.classList.remove(\"hide\");\n\n      let seconds = 0;\n      const timer = setInterval(() => {\n        seconds++;\n        this.timer.textContent = formatTime(seconds);\n      }, 1000);\n      const recorder = new MediaRecorder(stream);\n      const chunks = [];\n      recorder.start();\n\n      recorder.addEventListener(\"dataavailable\", (event) => {\n        chunks.push(event.data);\n      });\n\n      recorder.addEventListener(\"stop\", () => {\n        this.blob = new Blob(chunks);\n      });\n\n      const sendRecord = () => {\n        recorder.stop();\n        clearInterval(timer);\n        this.timer.textContent = formatTime(0);\n        stream.getTracks().forEach((trac) => trac.stop());\n        this.toGeolocate(\"audio\");\n        this.recordAudioBtn.classList.remove(\"hide\");\n        this.recordVideoBtn.classList.remove(\"hide\");\n        this.recordSend.classList.add(\"hide\");\n        this.recordCancel.classList.add(\"hide\");\n        this.timer.classList.add(\"hide\");\n        this.recordSend.removeEventListener(\"click\", sendRecord);\n      };\n\n      const cancelRecord = () => {\n        recorder.stop();\n        clearInterval(timer);\n        this.timer.textContent = formatTime(0);\n        stream.getTracks().forEach((trac) => trac.stop());\n        this.recordAudioBtn.classList.remove(\"hide\");\n        this.recordVideoBtn.classList.remove(\"hide\");\n        this.recordSend.classList.add(\"hide\");\n        this.recordCancel.classList.add(\"hide\");\n        this.timer.classList.add(\"hide\");\n        this.recordSend.removeEventListener(\"click\", sendRecord);\n        this.recordCancel.removeEventListener(\"click\", cancelRecord);\n      };\n\n      this.recordSend.addEventListener(\"click\", sendRecord);\n      this.recordCancel.addEventListener(\"click\", cancelRecord);\n    } catch (error) {\n      this.medalErrorInfo = document.querySelector(\".modal-error-media\");\n      this.medalErrorInfo.classList.remove(\"hide\");\n      const medalErrorInfoBtn = this.medalErrorInfo.querySelector(\n        \".error-media-button\",\n      );\n      medalErrorInfoBtn.addEventListener(\"click\", () => {\n        event.preventDefault();\n        this.medalErrorInfo.classList.add(\"hide\");\n        return;\n      });\n    }\n  }\n\n  async toRecordVideo() {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: true,\n        audio: true,\n      });\n\n      this.recordAudioBtn.classList.add(\"hide\");\n      this.recordVideoBtn.classList.add(\"hide\");\n      this.recordSend.classList.remove(\"hide\");\n      this.recordCancel.classList.remove(\"hide\");\n      this.timer.classList.remove(\"hide\");\n      this.videoWindow.classList.remove(\"hide\");\n      this.videoWindow.srcObject = stream;\n      this.videoWindow.addEventListener(\"canplay\", () => {\n        this.videoWindow.play();\n      });\n\n      let seconds = 0;\n      const timer = setInterval(() => {\n        seconds++;\n        this.timer.textContent = formatTime(seconds);\n      }, 1000);\n      const recorder = new MediaRecorder(stream);\n      const chunks = [];\n      recorder.start();\n\n      recorder.addEventListener(\"dataavailable\", (event) => {\n        chunks.push(event.data);\n      });\n\n      recorder.addEventListener(\"stop\", () => {\n        this.blob = new Blob(chunks);\n      });\n\n      const sendRecord = () => {\n        recorder.stop();\n        clearInterval(timer);\n        this.timer.textContent = formatTime(0);\n        stream.getTracks().forEach((trac) => trac.stop());\n        this.toGeolocate(\"video\");\n        this.videoWindow.classList.add(\"hide\");\n        this.recordAudioBtn.classList.remove(\"hide\");\n        this.recordVideoBtn.classList.remove(\"hide\");\n        this.recordSend.classList.add(\"hide\");\n        this.recordCancel.classList.add(\"hide\");\n        this.timer.classList.add(\"hide\");\n        this.recordSend.removeEventListener(\"click\", sendRecord);\n      };\n\n      const cancelRecord = () => {\n        recorder.stop();\n        clearInterval(timer);\n        this.timer.textContent = formatTime(0);\n        stream.getTracks().forEach((trac) => trac.stop());\n        this.videoWindow.classList.add(\"hide\");\n        this.recordAudioBtn.classList.remove(\"hide\");\n        this.recordVideoBtn.classList.remove(\"hide\");\n        this.recordSend.classList.add(\"hide\");\n        this.recordCancel.classList.add(\"hide\");\n        this.timer.classList.add(\"hide\");\n        this.recordSend.removeEventListener(\"click\", sendRecord);\n        this.recordCancel.removeEventListener(\"click\", cancelRecord);\n      };\n\n      this.recordSend.addEventListener(\"click\", sendRecord);\n      this.recordCancel.addEventListener(\"click\", cancelRecord);\n    } catch (error) {\n      this.medalErrorInfo = document.querySelector(\".modal-error-media\");\n      this.medalErrorInfo.classList.remove(\"hide\");\n      const medalErrorInfoBtn = this.medalErrorInfo.querySelector(\n        \".error-media-button\",\n      );\n      medalErrorInfoBtn.addEventListener(\"click\", () => {\n        event.preventDefault();\n        this.medalErrorInfo.classList.add(\"hide\");\n        return;\n      });\n    }\n  }\n\n  addMessage(data, geoData) {\n    const message = this.createMessage(data, geoData);\n    this.messagesBox.prepend(message);\n  }\n\n  renderMessage(obj) {\n    const messageBox = document.createElement(\"div\");\n    messageBox.classList = \"message\";\n    const container = document.createElement(\"div\");\n    let message = null;\n    if (obj.type === \"text\") {\n      message = document.createElement(\"div\");\n      message.classList = \"message-text\";\n      message.textContent = obj.value;\n    }\n    if (obj.type === \"audio\") {\n      message = document.createElement(\"audio\");\n      message.classList = \"message-audio\";\n      message.controls = \"controls\";\n      message.src = URL.createObjectURL(obj.value);\n    }\n    if (obj.type === \"video\") {\n      message = document.createElement(\"video\");\n      message.classList = \"message-video\";\n      message.controls = \"controls\";\n      message.src = URL.createObjectURL(obj.value);\n    }\n    const messageGeo = document.createElement(\"div\");\n    messageGeo.classList = \"message-geo\";\n    messageGeo.textContent = obj.geo;\n    const iconGeo = document.createElement(\"img\");\n    iconGeo.classList = \"geo-icon\";\n    iconGeo.src = \"/f7ad747cb80c8253b76c.png\";\n    messageGeo.appendChild(iconGeo);\n    container.appendChild(message);\n    container.appendChild(messageGeo);\n    const dateMessage = document.createElement(\"div\");\n    dateMessage.classList = \"message-data\";\n    dateMessage.textContent = obj.date;\n    messageBox.appendChild(container);\n    messageBox.appendChild(dateMessage);\n    return messageBox;\n  }\n\n  createMessage(data, geoData) {\n    const messageObj = {};\n    if (data.text) {\n      messageObj.type = \"text\";\n      messageObj.value = data.text;\n    }\n    if (data.audio) {\n      messageObj.type = \"audio\";\n      messageObj.value = this.blob;\n    }\n    if (data.video) {\n      messageObj.type = \"video\";\n      messageObj.value = this.blob;\n    }\n    messageObj.geo = geoData;\n    messageObj.date = this.getDate();\n    this.messages.push(messageObj);\n    const message = this.renderMessage(messageObj);\n    return message;\n  }\n\n  getDate() {\n    const formattedDate = new Date()\n      .toLocaleString(\"ru-RU\", {\n        day: \"numeric\",\n        month: \"numeric\",\n        year: \"numeric\",\n        hour: \"numeric\",\n        minute: \"numeric\",\n        hour12: false,\n      })\n      .split(\",\")\n      .join(\"\");\n    return formattedDate;\n  }\n\n  toGeolocate(typeOfMessage) {\n    this.modalGeolocate = document.querySelector(\".modal-geolocate\");\n    const errorMessage = this.modalGeolocate.querySelector(\".error\");\n    if (!errorMessage.classList.contains(\"hide\")) {\n      errorMessage.classList.add(\"hide\");\n    }\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        (data) => {\n          const { latitude, longitude } = data.coords;\n          const geoData = `[${latitude}, ${longitude}]`;\n          if (typeOfMessage === \"text\") {\n            this.addMessage({ text: this.messageInput.value }, geoData);\n            this.messageInput.value = \"\";\n          }\n          if (typeOfMessage === \"audio\") {\n            this.addMessage({ audio: this.blob }, geoData);\n          }\n          if (typeOfMessage === \"video\") {\n            this.addMessage({ video: this.blob }, geoData);\n          }\n          return;\n        },\n        (err) => {\n          if (err.message === \"User denied Geolocation\");\n          this.showModal(typeOfMessage);\n          return;\n        },\n        { enableHighAccuracy: true },\n      );\n    }\n  }\n\n  showModal(typeOfMessage) {\n    const errorMessage = this.modalGeolocate.querySelector(\".error\");\n    this.modalGeolocate.classList.remove(\"hide\");\n    const geoData = this.modalGeolocate.querySelector(\".geolocate-coordinates\");\n    const geoSubmit = this.modalGeolocate.querySelector(\".submit\");\n    const cancel = this.modalGeolocate.querySelector(\".cancel\");\n    cancel.addEventListener(\"click\", () => {\n      event.preventDefault();\n      geoData.value = \"\";\n      this.modalGeolocate.classList.add(\"hide\");\n      return;\n    });\n    const enterGeo = () => {\n      event.preventDefault();\n      const validCoords = isValidCoordinates(geoData.value);\n      if (validCoords.error) {\n        errorMessage.classList.remove(\"hide\");\n        return;\n      }\n      if (typeOfMessage === \"text\") {\n        this.addMessage(\n          { text: this.messageInput.value },\n          `[${validCoords.latitude}, ${validCoords.longitude}]`,\n        );\n        this.messageInput.value = \"\";\n      }\n      if (typeOfMessage === \"audio\") {\n        this.addMessage(\n          { audio: this.blob },\n          `[${validCoords.latitude}, ${validCoords.longitude}]`,\n        );\n      }\n      if (typeOfMessage === \"video\") {\n        this.addMessage(\n          { video: this.blob },\n          `[${validCoords.latitude}, ${validCoords.longitude}]`,\n        );\n      }\n      geoData.value = \"\";\n      this.modalGeolocate.classList.add(\"hide\");\n\n      geoSubmit.removeEventListener(\"click\", enterGeo);\n      return;\n    };\n    geoSubmit.addEventListener(\"click\", enterGeo);\n  }\n}\n","import WidgetChat from \"../components/WidgetChat\";\n\nconst messagesBox = document.querySelector(\".messages-box\");\nconst messageInput = document.querySelector(\".message-input\");\nconst widgetChat = new WidgetChat(messagesBox, messageInput);\n\nwindow.addEventListener(\"beforeunload\", () => {\n  widgetChat.messages.forEach((message) => {\n    if (message.type === \"audio\" || message.type === \"video\") {\n      const reader = new FileReader();\n      reader.readAsArrayBuffer(message.value);\n      reader.onload = () => {\n        message.value = reader.result;\n        console.log(message.value);\n        localStorage.setItem(\n          \"savedMessages\",\n          JSON.stringify(widgetChat.messages),\n        );\n      };\n    } else {\n      localStorage.setItem(\n        \"savedMessages\",\n        JSON.stringify(widgetChat.messages),\n      );\n    }\n  });\n});\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const savedMessages = JSON.parse(localStorage.getItem(\"savedMessages\"));\n  console.log(savedMessages);\n  if (savedMessages) {\n    savedMessages.forEach((message) => {\n      if (message.type === \"audio\" || message.type === \"video\") {\n        console.log(message.value);\n        const blob = new Blob([message.value]);\n        message.value = URL.createObjectURL(blob);\n      }\n      widgetChat.messages.push(message);\n      widgetChat.messagesBox.prepend(widgetChat.renderMessage(message));\n    });\n  }\n});\n","import \"./css/style.css\";\nimport \"./js/app\";\n"],"names":["isValidCoordinates","input","regex","match","error","latitude","parseFloat","longitude","formatTime","time","minutes","Math","floor","seconds","toString","padStart","WidgetChat","constructor","messagesBox","messageInput","messages","blob","recordAudioBtn","recordVideoBtn","recordSend","recordCancel","videoWindow","timer","onEventInput","bind","init","showModal","addMessage","createMessage","renderMessage","toGeolocate","toRecordVideo","toRecordAudio","inputBox","closest","querySelector","addEventListener","event","preventDefault","code","value","stream","navigator","mediaDevices","getUserMedia","audio","classList","add","remove","setInterval","textContent","recorder","MediaRecorder","chunks","start","push","data","Blob","sendRecord","stop","clearInterval","getTracks","forEach","trac","removeEventListener","cancelRecord","medalErrorInfo","document","medalErrorInfoBtn","video","srcObject","play","geoData","message","prepend","obj","messageBox","createElement","container","type","controls","src","URL","createObjectURL","messageGeo","geo","iconGeo","appendChild","dateMessage","date","messageObj","text","getDate","formattedDate","Date","toLocaleString","day","month","year","hour","minute","hour12","split","join","typeOfMessage","modalGeolocate","errorMessage","contains","geolocation","getCurrentPosition","coords","err","enableHighAccuracy","geoSubmit","cancel","enterGeo","validCoords","widgetChat","window","reader","FileReader","readAsArrayBuffer","onload","result","console","log","localStorage","setItem","JSON","stringify","savedMessages","parse","getItem"],"sourceRoot":""}